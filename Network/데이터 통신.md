#### 라우팅 테이블
3계층의 대표적인 역할이 최적의 경로로 위와같은 프로토콜로 찾아가는건데 그 경로를 지도처럼 담고있는 것. cmd에 netstat -r를 치면 확인 할 수 있고. 라우팅 테이블에 적힌 경로만 찾아갈 수 있다. (지도가 있어야지 찾아갈 수 있다.) 그래서 0.0.0.0, 게이트웨이 등 기본 경로를 설정해준다.
[[라우터]]

#### 네트워크 통신과정

|          |        |          |
| -------- | ------ | -------- |
| 공유기   | 라우터 | 공유기   |
| 스위치 a |        | 스위치 b | 
| Com a    |        | Com b    |

위와 같은 테이블이 있다.  (Com a -> Com b)
Com a가 본인의 라우팅 테이블을 확인하고 b의 네트워크 대역이 라우팅 테이블에 있어야지 통신이 가능하다. 테이블에 셋팅이 되어 있을 때
1. ICMP로 통신을 확인하고 프로토콜을 보낸다 (Type Code 8).

| Eth | IPv4 | ICMP 요청 |
| --- | ---- | --------- |
|     |      |           |

2.  ICMP 프로토콜을 만들었으면 IPv4를 만들고 Ethernet 프로토콜을 만들어 보낸다.
3.  스위치 a는 이더넷을 확인하고 공유기에 보내준다.
4. 공유기는 2계층을 봤을 때 목적지가 맞으므로 3계층을 본다 (IPv4)
5. 목적지 주소가 자기가 아님을 확인하고 Com b의 주소를 보고 라우팅 테이블을 확인한다.
6. 라우터에 보내야 한다는 것을 확인하고 Ethernet 프로토콜과 라우팅 테이블을 다시 만든다. 목적지 MAC주소와 출발지 MAC 주소를 바꿔서 보낸다. 이더넷 프로토콜은 네트워크가 바뀔 때 마다 바뀐다.
7.  라우터와 공유기는 5~6번을 반복하여 스위치로 보낸다.
8. Com b에 도착한 ICMP는 요청은 ICMP 응답으로 바꿔서 역순으로 올라간다.

우리가 ping 명령어를 치면 위의 과정이 진행된다. 만약 우리가 공유기의 MAC주소를 모르면 ARP로 알아오고 공유기도 라우터의 MAC주소를 ARP로 보내고 알아내고 보내고.. (반복)

#### 웹 서버 통신
- 브라우저는 URL의 의미에 따라 (GET, POST) 메시지를 만들어 전송하다.
- 메시지를 만들면 OS에 의뢰해서 웹 서버로 송신하는데, 이 때 메시지를 넘기는 상대의 IP주소를 OS에 통지해야 한다. (URL안의 도메인이 있고 그 서버를 조회하여 IP 주소를 조사. DNS 서버는 전 세계에 수만 대.)
- IP 조사 후에는 웹 서버에 송신하도록 OS에 의뢰.


[[FTP]]