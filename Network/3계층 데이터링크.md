#### 3계층 프로토콜
[[ARP 프로토콜]], [[IPv4 프로토콜]], IPv6 프로토콜, ICMP 프로토콜
#### 3계층에서 하는 일
다른 네트워크 대역, 서로 다른 LAN 대역들을 연결시켜주는 역할을 한다. LAN과 LAN을 연결하는것이 WAN, 3계층의 역할이다.  3계층의 대표적인 장비가 Router이다. 스위치라는 2계층 장비만으로는 서로 다른 네트워크 대역으로 만들고 통신할 수 없다. 즉 멀리있는곳으로 가기 위해선 3계층이 필요하다. 

#### 3계층의 기능
- 3계층에서 쓰는 주소 : IP 주소.
	- 멀리있는 애들이랑 통신하려면 MAC주소 뿐만 아니라 IP 주소도 가지고 있어야 한다.

##### ipconfig를 쳤을 때 나오는 주소
- IPv4 주소
	- 현재 PC에 할당된 IP 주소. IPv4 주소의 경우 멀리있는곳이랑 통신 할 때 IP 주소만 있는게 아니라 서브넷 마스크, 게이트웨이 주소가 추가적으로 필요함.
- 서브넷 마스크
	- IP 주소에 대한 네트워크의 대역을 규정하는 것. 네트워크 대역을 어디서 구분하는지 지정한 값. 그래서 IP 주소는 항상 서브넷 마스크와 같이 씀
- 게이트웨이 
	- 외부와 통신할 때 사용하는 네트워크의 출입구

#### IPv6
  

#### 서브넷 마스크
- Classful한 네트워크 대역을 나눠주는데 사용하는 값
- 어디까지가 네트워크 대역을 구분하는데 사용하고 어디서부터 호스트를 구분하는데 사용하는지 지정
- 2진수로 표기했을 때 1로 시작, 연속된 1로 구성되어있어서 1과 1사이에는 0이 올 수 없다. 한 번 0이 오면 끝까지 0
- 255.255.255.192 -> 11111111.11111111.11111111.11000000 (C클래스)
- 255.255.192.0 -> 11111111.11111111.11000000.00000000 (B클래스)
- 255.192.0.0 -> 11111111.11000000.00000000.00000000 (A클래스)

#### 사설 IP와 공인 IP
- 사설IP와 공인IP가 현재 사용하는 IPv4의 개념. Classless와 같이 사용
- 공인 IP : 인터넷 세상에서 사용하는 IP주소
- 사설 IP : 같은 네트워크 대역에서 사용하는 IP주소
##### 사설IP와 공인IP로 부족한 IP문제에 통신하는 방법
사설 IP를 사용하는 장비들이 네트워크 통신 할 때 공인 IP로 바꿔서 인터넷과 통신한다. 강의실 -> 네이버로 갈 때 공인 IP 하나로 바껴서 간다. 그래서 외부에서 볼 때 (네이버 ->강의실 ) 구분이 되지 않는다. 공유기에 할당된 IP만 보이기 때문에 공유기 측에서 요청을 보낸 기기를 찾는다. **사설 IP에서 공인 IP로 보내주는것을 NAT**라고 한다.  NAT는 특정 아이피를 다른 특정 아이피로 바꾸는 것. 그래서 사설 -> 사설, 공인 -> 공인으로도 바꿀 수 있다.
- 외부에서 통신 할 때 사설 네트워크 대역이 없는것처럼 보임 (네이버가 30대의 기기가 있는 강의장을 볼 때 공유기 1대로 보임)
- 각자 인터넷을 얽히지않고 따로 할 수 있는건 공유기가 처리해서임. 공유기를 타고 WAN 대역으로 나갈 때 NAT 테이블에 기록하고 응답이 왔을 때 NAT 테이블을 보고 대상한테 전달
- 나간 적 없는 패킷이 응답으로 들어오면 공유기가 받고 사설에 전달하지 않고 끝
- 내부(사설 네트워크)에 특정 웹 서버가 있는 경우 공유기가 받고 응답을 주지 않기 때문에 **서버의 경우 공인 IP를 씀 or 공유기에 추가 작업을 함(포트포워딩 : 4계층)
- 공인 IP 하나당 사설 네트워크 대역이 따로 생긴거라서 IP 하나당 0.0.0.0 ~  255.255.255.255 가 생긴 샘. 이래서 부족현상이 어느정도 해결 됨.

#### 특수한 IP 주소
- 0.0.0.0 : 나머지 모든 IP
- 127.0.0.1 : 자기 자신을 뜻하는 주소
- 게이트웨이 주소 : 네트워크 대역에서 쓸 수 있는 IP 중 가장 작거나 가장 큰 IP 주소. 외부 세상으로 나가는 문. IP를 설정 할 때 외부세상으로 나가는 문의 위치를 알려주는 것